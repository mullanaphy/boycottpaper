requirejs.config({
  "baseUrl": "/resources/js",
  "paths": {
    "backbone": "backbone",
    "jquery": "jquery.min",
    "jquery.ajaxDispatcher": "jquery/ajaxDispatcher",
    "jquery.ajaxEvents": "jquery/ajaxEvents",
    "jquery.ajaxHandler": "jquery/ajaxHandler",
    "jquery.ajaxSettings": "jquery/ajaxSettings",
    "jquery.bootstrap": "jquery/bootstrap.min",
    "jquery.center": "jquery/center",
    "jquery.deParams": "jquery/deParams",
    "jquery.history": "jquery/history",
    "jquery.popup": "jquery/popup",
    "underscore": "underscore"
  },
  "shim": {
    "backbone": {"deps": ["jquery", "underscore"], "exports": "Backbone"},
    "jquery.ajaxDispatcher": {"deps": ["jquery"]},
    "jquery.ajaxHandler": {"deps": ["jquery", "jquery.ajaxDispatcher", "jquery.ajaxEvents", "jquery.ajaxSettings", "jquery.center", "jquery.deParams", "jquery.popup"]},
    "jquery.ajaxEvents": {"deps": ["jquery"]},
    "jquery.ajaxSettings": {"deps": ["jquery"]},
    "jquery.bootstrap": {"deps": ["jquery"]},
    "jquery.center": {"deps": ["jquery"]},
    "jquery.deParams": {"deps": ["jquery"]},
    "jquery.history": {"deps": ["jquery"]},
    "jquery.popup": {"deps": ["jquery"]},
    "underscore": {"exports": "_"}
  }
});
require(["jquery", "jquery.bootstrap"], function($) {
  $(function() {
    var modal = null;
    $('.secret-panel').on('click', function(event) {
      event.stopPropagation();
      if (modal === null) {
        var header = '<div class="modal-header"><button type="button" class="close" data-dismiss="modal">Ã—</button><h4 class="modal-title">Secrets...</h4></div>';
        var footer = '<div class="modal-footer"><button type="button" class="btn btn-warning" data-dismiss="modal">Close</button></div>';
        var body = '<div class="modal-body"></div>';
        modal = $('<div class="modal fade"></div>');
        modal.html('<div class="modal-dialog"><div class="modal-content">' + header + body + footer + '</div></div>');
        $('body').append(modal);
      }
      $('.modal-body', modal).html($('<img class="img-responsive" alt="hidden panel" src="' + this.getAttribute('href') + '"/>'));
      modal.modal('show');
      return false;
    });
  });
});