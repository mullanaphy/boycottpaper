{% extends "base.html" %}
{# Boycott Paper, (c) John Mullanaphy (john@jo.mu) 2014, Licensed with OSL 3.0 #}

{% block title %}Latest Comics | {{ block.super }}{% endblock %}

{% block content %}
  {% if collection %}
    {% for comic in collection %}
      <div class="row">
        {% with comic.panel_set.all as panels %}
          {% if panels|length > 1 %}
            {% for panel in comic.panels %}
              <div class="comic-panel col-lg-3 col-md-6 col-sm-12">
                <a href="{% url 'comic.views.load_by_slug' comic=comic.slug _format='html' %}">
                  <img alt="{{ panel.alt }}" src="{{ panel.source.url }}"/>
                </a>
              </div>
            {% endfor %}
          {% elif panels|length == 1 %}
            {% with panels|first as panel %}
              <div class="comic-panel col-lg-12">
                <a href="{% url 'comic.views.load_by_slug' comic=comic.slug _format='html' %}">
                  <img alt="{{ panel }}" src="{{ panel.source.url }}"/>
                </a>
              </div>
            {% endwith %}
          {% else %}
            <div class="comic-panel col-lg-12">Panels missing... Sorry about that...</div>
          {% endif %}
        {% endwith %}
      </div>
      {% if comic.description %}
        <p>{{ comic.description }}</p>
      {% endif %}
    {% endfor %}
  {% else %}
    <p>No comics are available.</p>
  {% endif %}
{% endblock %}